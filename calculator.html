<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>InsightÂ® : Business Done Right</title>
          <link rel="stylesheet" href="styles/calculator.css">
          <link rel="stylesheet" href="styles/navbar.css">
          <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    </head>

    <body>
        <header>  
            <nav>
                <ul class="navigation">
                    <li class="logo"> <a href="index.html"> Insight Logo</a> </li>
                    <li> <a href="index.html"> <b>Home</b> </a> </li>
                    <li> <a href="how_to_use.html"> <b>How To Use</b> </a> </li>
                    <li> <a href="contact_us.html"> <b>Contact Us</b> </a> </li>
                    <li class="username"> <a href=""> <b>user37921</b> </a> </li>
                </ul>
            </nav>
        </header>
        
      <section>

          <!-- tab 2 -->
          <!-- <div id="" class="tabcontent">
            <h4>Let's talk business</h4>
                <label for="materialcost">Raw material cost per unit</label>
                <input type="number" id="materialcost" name="materialcost">
                <br>

                <label for="lastmonth">Units sold last month</label>
                <input type="number" id="lastmonth" name="lastmonth">
                <br>
                
                <label for="lastmonth-lastyear">Units sold last month a year ago</label>
                <input type="number" id="lastmonth-lastyear" name="lastmonth-lastyear">
                <br>

                <label for="nextmonth-lastyear">Units sold next month a year ago</label>
                <input type="number" id="nextmonth-lastyear" name="nextmonth-lastyear">
                <br>
                <button id="update"> update</button>
                <br>
              <label for="unit-estimate">Estimated units that will be sold next month:</label>
              <p id="unit_estimate">00</p>

              <label for="yoy"> Percentage of change in sales: </label> 
              <br>
              <p id="change"> 00.00%</p>
            </div> -->

<div class="container">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <button class="tablink business" onclick="openPage('business', this, 'rgb(209, 209, 209)')"id="defaultOpen">Business</button>
  <button class="tablink metrics" onclick="openPage('metrics', this, 'rgb(192, 191, 191)')">Metrics</button>
  <button class="tablink expenses" onclick="openPage('expenses', this, 'rgb(173, 173, 173)')">Expenses</button>
  <button class="tablink results" >Results</button>

  <div id="business" class="tabcontent">
              <!-- intro tab -->
              <div class="content">
                <div class="business-type">
                  <h4>Get started</h4>
                  <label for="business">What type of business do you operate?</label>
                  <select name="businesstype" id="businesstype">
                    <option>Select one</option>
                    <option value="fast-food">Fast food chain</option>
                    <option value="local">Local restaurant</option>
                    <option value="luxury">High-end restaurant</option>
                    <option value="store">Retail</option>
                  </select>
                  <div class="select-icon"></div>
                </div>
  
                <div class="product-type">
                  <label for="producttype">What product are you trying to determine the price for?</label>
                  <select name="product-type" id="product-type">
                    <option >Select one</option>
                    <option value="burger">Burger (beef)</option>
                    <option value="sandwich">Sandwich</option>
                    <option value="fries">French fries</option>
                    <option value="drink">Beverage</option>
                    <option value="drink">Hot Dog</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>
            </div>

  <div id="metrics" class="tabcontent">
    <div class="row">
      <div class="column">
        <h4 style="margin-top: 30px;">Let's talk business</h4>

          <label for="materialcost">Raw material cost per unit</label>
        <div class="tooltip">
          <input type="number" id="materialcost" name="materialcost">
          <span style="text-align: center;" class="tooltiptext">This is the amount it costs for each unit produced</span>
        </div>

        <br>

        <label for="lastmonth">Units sold last month</label>
        <input type="number" id="lastmonth" name="lastmonth">
        <br>
        
        <label for="lastmonth-lastyear">Units sold last month a year ago</label>
        <input type="number" id="lastmonth-lastyear" name="lastmonth-lastyear">
        <br>

        <label for="nextmonth-lastyear">Units sold next month a year ago</label>
        <input type="number" id="nextmonth-lastyear" name="nextmonth-lastyear">
        <br>
        <button class="update" id="update"> update</button>
      </div>
        
      <div class="column">
        <div class="output" style="margin-top: 170px; margin-left: 2px;">
          <label for="unit-estimate">Estimated units that will be sold next month:</label>
          <p class="unit-estimate" style="color: rgba(19,119,250,1);" id="unit_estimate">00 units.</p>

          <label for="yoy"> Percentage of change in sales: </label>
          <p style="color: white;" class="change" id="change"> 00.00%</p>
       </div>  
      </div>
    </div>

  </div>

    <div id="expenses" class="tabcontent">
        <h4>Expenses</h4>
        <label for="fixed-monthly">Fixed monthly costs</label>
        <div class="tooltip">
          <input type="number" id="fixed-monthly">
          <span style="text-align: center;" class="tooltiptext">Includes monthly rent, utility/bills, insurance</span>
        </div>

        <label style="margin-left: 150px;" for="covid-cost">Monthly COVID-19 cost</label>
        <div class="tooltip">
          <input type="number" id="covid-cost">
          <span style="text-align: center;" class="tooltiptext">PPE equipment(masks, gloves, etc..), sanitation, and any other expenses due to COVID-19</span>
        </div>
        <br>

      <label for="labor">Monthly labor costs (on average)</label>
      <div class="tooltip">
        <input type="number" id="labor">
        <span style="text-align: center;" class="tooltiptext">Sum of all employee wages, benefits, and/or payroll taxes</span>
      </div>

      <button style="margin-left: 440px;" id="submit" class="submit" onclick="openPage('results', this, 'rgb(163, 163, 163)')">See Results</button>
  </div>

    <div id="results" class="tabcontent">
      <h4>Here's what we found:</h4>
      <div style="justify-content: center;" class="result">
      <p class="breakeven" id="breakeven">Your break-even price:</p>
    
      <div class="row" style="padding-bottom: 50px;">
        <div class="column options">
          <p style="margin-top: 20px; color: rgba(19,119,250,1);" id="percent-change-unit">Estimated units sold next month: </p>
          <p style="margin-top: 25px; color: rgba(19,119,250,1);" id="price-output">Price at selected profit margin:</p>
          <p style="margin-top: 25px; color: rgba(19,119,250,1);" id="percent-change-price">New price at adjusted unit projection: </p>

          <br>
          <label for="">Profit margin:</label>
          <br>
          <br>
          <div class="profit-btn" id="profit-btn">
            <button onclick=" return priceGenerator(-.05)">-5%</button>
            <button onclick=" return priceGenerator(.05)">5%</button>
            <button onclick=" return priceGenerator(.1)">10%</button>
            <button onclick=" return priceGenerator(.15)">15%</button>
            <button onclick=" return priceGenerator(.20)">20%</button>
            <!-- <input type="text" onclick="return priceGenerator(this)" placeholder="(.00 format)"> -->
          </div>

          <br>
          <br>
          <label for="">Change in units sold next month:</label>
          <br>
          <br>
          <div class="price-btn" id="price-btn">
            <button onclick=" return marginGenerator(-.05)">-5%</button>
            <button onclick=" return marginGenerator(.05)">5%</button>
            <button onclick=" return marginGenerator(.1)">10%</button>
            <button onclick=" return marginGenerator(.15)">15%</button>
            <button onclick=" return marginGenerator(.20)">20%</button>
            <!-- <input type="number" onclick="return priceGenerator(this)" placeholder="(.00 format)"> -->
          </div>
          <!-- <br>
          <p id="profit-margin">Profit margin at selected price:</p> -->
        </div>

        <div class="column chart">
          <div style="margin-right: 20px;" id="chart"></div>
        </div>
      </div>
    </div>
</div>

  <script>
  function openPage(pageName,elmnt,color) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablink");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].style.backgroundColor = "";
    }
    document.getElementById(pageName).style.display = "block";
    elmnt.style.backgroundColor = color;
  }

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();

document.getElementById("update").addEventListener("click", function(){
  var material = document.getElementById("materialcost").value;
  var lastMonth = document.getElementById("lastmonth").value;
  var lastYear = document.getElementById("lastmonth-lastyear").value;
  var nextMonth = document.getElementById("nextmonth-lastyear").value;

  var percentChange = (lastMonth - lastYear)/lastYear;
  var estimateNextMonth =  Math.floor(nextMonth * percentChange) + parseFloat(nextMonth);

  if(percentChange < 0){
    document.getElementById("change").innerHTML = 
    (Math.round((percentChange * 100), 2) + "%").fontcolor("red");
    document.getElementById("unit_estimate").innerHTML = estimateNextMonth + " units.";
  }
  else{
    document.getElementById("change").innerHTML = 
    (Math.round((percentChange * 100), 2) + "%").fontcolor("green");
    document.getElementById("unit_estimate").innerHTML = estimateNextMonth + " units.";
    }

});

document.getElementById("submit").addEventListener("click", function(){
  var fixedMonthly = document.getElementById("fixed-monthly").value;
  var labor = document.getElementById("labor").value;
  var covidCost = document.getElementById("covid-cost").value;
  var nextMonth = document.getElementById("nextmonth-lastyear").value;
  var material = document.getElementById("materialcost").value;
  var material = document.getElementById("materialcost").value;
  var lastMonth = document.getElementById("lastmonth").value;
  var lastYear = document.getElementById("lastmonth-lastyear").value;
  var nextMonth = document.getElementById("nextmonth-lastyear").value;

  var percentChange = (lastMonth - lastYear)/lastYear;
  var estimateNextMonth =  Math.floor(nextMonth * percentChange) + parseFloat(nextMonth);


  var cost = (labor * 1.00) + (fixedMonthly * 1.00) + (covidCost* 1.00);
  var breakEven = (cost * 1.00) / (estimateNextMonth * 1.00) + (material * 1.00);

  document.getElementById("breakeven").innerHTML = "Your break-even price: $"+ breakEven.toFixed(2);
  document.getElementById("percent-change-unit").innerHTML ="Estimated units sold next month: " + estimateNextMonth;


});

function priceGenerator(x){
  var fixedMonthly = document.getElementById("fixed-monthly").value;
  var labor = document.getElementById("labor").value;
  var covidCost = document.getElementById("covid-cost").value;
  var nextMonth = document.getElementById("nextmonth-lastyear").value;
  var material = document.getElementById("materialcost").value;
  var material = document.getElementById("materialcost").value;
  var lastMonth = document.getElementById("lastmonth").value;
  var lastYear = document.getElementById("lastmonth-lastyear").value;
  var nextMonth = document.getElementById("nextmonth-lastyear").value;

  var percentChange = (lastMonth - lastYear)/lastYear;
  var estimateNextMonth =  Math.floor(nextMonth * percentChange) + parseFloat(nextMonth);


  var cost = (labor * 1.00) + (fixedMonthly * 1.00) + (covidCost* 1.00);
  var breakEven = (cost * 1.00) / (estimateNextMonth * 1.00) + (material * 1.00);

  document.getElementById("price-output").innerHTML = "Price at selected profit margin: $" + ((x * breakEven) + breakEven).toFixed(2);
}

function marginGenerator(y){
  var fixedMonthly = document.getElementById("fixed-monthly").value;
  var labor = document.getElementById("labor").value;
  var covidCost = document.getElementById("covid-cost").value;
  var nextMonth = document.getElementById("nextmonth-lastyear").value;
  var material = document.getElementById("materialcost").value;
  var material = document.getElementById("materialcost").value;
  var lastMonth = document.getElementById("lastmonth").value;
  var lastYear = document.getElementById("lastmonth-lastyear").value;
  var nextMonth = document.getElementById("nextmonth-lastyear").value;

  var percentChange = (lastMonth - lastYear)/lastYear;
  var estimateNextMonth =  Math.floor(nextMonth * percentChange) + parseFloat(nextMonth);

  var cost = (labor * 1.00) + (fixedMonthly * 1.00) + (covidCost* 1.00);

  var newEstimate = Math.floor(estimateNextMonth * y) + parseFloat(estimateNextMonth);
  var breakEven = (cost * 1.00) / (newEstimate * 1.00) + material;

  document.getElementById("percent-change-price").innerHTML = "New price at adjusted unit projection (" + newEstimate + "): " + breakEven;
}

var options = {
  colors:[
   // loss
    '#cc0000',
  // break-even
   '#3366ff',
  // profit
  '#00cc00'],
          series: [{
          name: 'Loss',
          data: [44, 55, 41, 67, 22]
        }, {
          name: 'Break Even',
          data: [1, 1, 1, 1, 1]
        }, {
          name: 'Profit',
          data: [11, 17, 15, 15, 21]
          
        }],


          chart: {
          type: 'bar',
          height: 450,
          stacked: true,
          stackType: 'normal'
        },
        
  responsive: [{
    breakpoint: 480,
    options: {
      legend: {
      position: 'bottom',
      offsetX: -10,
      offsetY: 0
      }
    }
  }],

  yaxis: {
    labels: {
      formatter: function (value) {
      return  "$" + value;
        }
      },
  },
  xaxis: {
    categories: ['Burger (beef)', 'Sandwich', 'French fries', 'Beverage', 'Hot Dog'],
  },
  fill: {
    opacity: 1
  },
  legend: {
    position: 'right',
    offsetX: 0,
    offsetY: 50
  },
};

  var chart = new ApexCharts(document.querySelector("#chart"), options);
  chart.render();

</script>

</div>
</div>

      </section>

    </body>
</html>